# モジュールとは

- モジュールとはパッケージの集まり
    - 公式リファレンスの定義だと、そのパッケージの集まりは一緒にバージョン管理、公開、配布される
- モジュールはバージョン管理されているリポジトリ又はプロキシサーバよりダウンロードされる
- モジュールは`go.mod`に宣言されたモジュールパスによって特定される
    - `go.mod`には他のモジュールとの依存関係に関する情報も含まれている
- モジュールのルートディレクトリは、`go.mod`を含むディレクトリ
- モジュール内の各パッケージは、同じディレクトリのソースファイルを一緒にコンパイルしたもの
    - パッケージのパスは、モジュールのパスにルートからそのパッケージが含まれるディレクトリへの相対パスを結合したもの
        - パッケージ名ではなくディレクトリ名であることに注意
            - 絶対ではないが、管理のことを考えるとディレクトリ名とパッケージ名を同じにしない理由は特にない
- `indirect`コメントはモジュール内の`import`文にないモジュール、又は直接依存していない関節的に依存しているモジュールに付く
    - 直接依存しているモジュールが`go.mod`ファイルで依存管理をしていない場合は、関節依存モジュールも`go.mod`に含んでおく必要がある

## パッケージとは

> Go code is organized into packages
https://blog.golang.org/package-names

- ソースコードを構成する単位
- 一つのパッケージは一つのディレクトリの一つ以上の`.go `ファイルから成る

## go.sumとは

- go.sumには依存するモジュールのチェックサム(標準ライブラリ以外のパッケージ)が記録される
	- 依存しているモジュールのファイルツリーのハッシュ値が記録され、ビルド時に検証される
- チェックサムを利用して、依存モジュールの内容の変更を検出する
- 初回インストール時にはチェックサムDBからチェックサムを参照する(1.13以降)
- go.sumの各行はモジュールパス `バージョン(*/go.mod) ハッシュ`で構成される
- バージョンがgo.modで終わる場合、モジュールのgo.modファイルのパスのハッシュが記載され、そうでない場合はモジュールの.zipファイル内のファイルのハッシュとなる
- ハッシュのh1はSHA-256を示し、:の後にbase64でエンコードしたハッシュが続く
